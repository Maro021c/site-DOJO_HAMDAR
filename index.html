<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestão de Atletas - Taekwondo Hamdar</title>
    <style>
        :root {
            --gold: #D4AF37;
            --gold-light: #F5E8B5;
            --gold-dark: #B8860B;
            --black: #000000;
            --white: #FFFFFF;
            --gray-light: #F5F5F5;
            --gray: #757575;
            --gray-dark: #424242;
            --success: #388e3c;
            --warning: #f57c00;
            --danger: #d32f2f;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--white);
            color: var(--black);
            line-height: 1.6;
            font-size: 16px;
            -webkit-text-size-adjust: 100%;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
        }
        
        header {
            background-color: var(--black);
            color: var(--white);
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            border-bottom: 3px solid var(--gold);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .logo-image {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .logo-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .logo-text {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--gold);
        }
        
        nav {
            width: 100%;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            flex-wrap: wrap;
            gap: 5px;
            justify-content: center;
        }
        
        nav ul li {
            margin: 2px;
        }
        
        nav ul li a {
            color: var(--white);
            text-decoration: none;
            padding: 0.5rem 0.7rem;
            border-radius: 4px;
            transition: all 0.3s;
            font-size: 0.9rem;
            display: block;
            white-space: nowrap;
        }
        
        nav ul li a:hover {
            background-color: var(--gold);
            color: var(--black);
        }
        
        .btn {
            padding: 0.8rem 1.2rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            font-size: 1rem;
            min-height: 44px;
        }
        
        .btn-primary {
            background-color: var(--gold);
            color: var(--black);
        }
        
        .btn-primary:hover {
            background-color: var(--gold-dark);
            color: var(--white);
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: var(--white);
        }
        
        .btn-danger:hover {
            background-color: #b71c1c;
        }
        
        .btn-success {
            background-color: var(--success);
            color: var(--white);
        }
        
        .btn-success:hover {
            background-color: #2e7d32;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--gold);
            color: var(--black);
        }
        
        .btn-outline:hover {
            background-color: var(--gold);
        }
        
        .btn-small {
            padding: 0.5rem 0.8rem;
            font-size: 0.85rem;
            min-height: 36px;
        }
        
        .card {
            background-color: var(--white);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--gray-light);
        }
        
        .card-gold {
            border-top: 3px solid var(--gold);
        }
        
        .form-group {
            margin-bottom: 1.2rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 1rem;
        }
        
        input, select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            min-height: 44px;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 0 2px var(--gold-light);
        }
        
        .hidden {
            display: none !important;
        }
        
        .athlete-list {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        
        .athlete-list th, .athlete-list td {
            padding: 0.7rem;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .athlete-list th {
            background-color: var(--gray-light);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .athlete-list tr:hover {
            background-color: var(--gold-light);
        }
        
        .actions {
            display: flex;
            gap: 0.4rem;
            flex-wrap: wrap;
        }
        
        .belt {
            padding: 0.3rem 0.5rem;
            border-radius: 4px;
            font-weight: 500;
            text-align: center;
            display: inline-block;
            min-width: 90px;
            font-size: 0.8rem;
        }
        
        /* Faixas de Taekwondo */
        .belt-white { background-color: var(--white); color: var(--black); border: 1px solid #ddd; }
        .belt-yellow { background-color: #FFEB3B; color: var(--black); }
        .belt-orange { background-color: #FF9800; color: var(--white); }
        .belt-green { background-color: #4CAF50; color: var(--white); }
        .belt-blue-light { background-color: #03A9F4; color: var(--white); }
        .belt-blue-dark { background-color: #0D47A1; color: var(--white); }
        .belt-purple { background-color: #9C27B0; color: var(--white); }
        .belt-red { background-color: #F44336; color: var(--white); }
        .belt-red-black { 
            background: linear-gradient(to bottom, #F44336 50%, #000000 50%);
            color: var(--white);
        }
        .belt-black { background-color: #000000; color: var(--white); }
        
        /* Faixas de Hapkido */
        .belt-hapkido-white { background-color: var(--white); color: var(--black); border: 1px solid #ddd; }
        .belt-hapkido-gray { background-color: #9E9E9E; color: var(--white); }
        .belt-hapkido-yellow { background-color: #FFEB3B; color: var(--black); }
        .belt-hapkido-orange { background-color: #FF9800; color: var(--white); }
        .belt-hapkido-green { background-color: #4CAF50; color: var(--white); }
        .belt-hapkido-blue { background-color: #2196F3; color: var(--white); }
        .belt-hapkido-brown { background-color: #795548; color: var(--white); }
        .belt-hapkido-red { background-color: #F44336; color: var(--white); }
        .belt-hapkido-red-black { 
            background: linear-gradient(to bottom, #F44336 50%, #000000 50%);
            color: var(--white);
        }
        .belt-hapkido-black { background-color: #000000; color: var(--white); }
        
        .alert {
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }
        
        .alert-success {
            background-color: #E8F5E9;
            color: var(--success);
            border: 1px solid #C8E6C9;
        }
        
        .alert-error {
            background-color: #FFEBEE;
            color: var(--danger);
            border: 1px solid #FFCDD2;
        }
        
        .alert-warning {
            background-color: #FFF3E0;
            color: var(--warning);
            border: 1px solid #FFE0B2;
        }
        
        .login-form {
            max-width: 100%;
            margin: 1rem auto;
            padding: 0 10px;
        }
        
        .page-title {
            margin-bottom: 1.5rem;
            color: var(--black);
            position: relative;
            padding-bottom: 0.5rem;
            font-size: 1.5rem;
        }
        
        .page-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background-color: var(--gold);
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.2rem;
            margin-top: 1.5rem;
        }
        
        .dashboard-card {
            background-color: var(--white);
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-top: 3px solid var(--gold);
        }
        
        .dashboard-card h3 {
            margin-bottom: 1rem;
            color: var(--black);
            font-size: 1.2rem;
        }
        
        .pending-approval {
            background-color: #FFF3E0;
            border-left: 4px solid var(--warning);
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 6px;
            font-size: 0.95rem;
        }
        
        .status-badge {
            padding: 0.3rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .status-pending {
            background-color: #FFF3E0;
            color: var(--warning);
        }
        
        .status-approved {
            background-color: #E8F5E9;
            color: var(--success);
        }
        
        .admin-actions {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 15px;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Melhorias para touch */
        button, input, select {
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        /* Ajustes específicos para mobile */
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .logo-container {
                justify-content: center;
                margin-bottom: 10px;
            }
            
            nav ul {
                gap: 3px;
            }
            
            nav ul li a {
                padding: 0.4rem 0.6rem;
                font-size: 0.85rem;
            }
            
            .card {
                padding: 1.2rem;
                margin-bottom: 1.2rem;
            }
            
            .btn {
                padding: 0.7rem 1rem;
                font-size: 0.95rem;
            }
            
            .athlete-list {
                font-size: 0.8rem;
            }
            
            .athlete-list th, .athlete-list td {
                padding: 0.5rem 0.4rem;
            }
            
            .belt {
                min-width: 80px;
                font-size: 0.75rem;
                padding: 0.2rem 0.4rem;
            }
            
            .actions {
                gap: 0.3rem;
            }
            
            .admin-actions {
                flex-direction: column;
                gap: 0.8rem;
            }
            
            .admin-actions .btn {
                width: 100%;
            }
        }
        
        @media (min-width: 768px) {
            .dashboard-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
            
            .header-content {
                flex-wrap: nowrap;
            }
            
            nav {
                width: auto;
            }
            
            nav ul {
                justify-content: flex-end;
            }
            
            .logo-container {
                margin-bottom: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo-container">
                <div class="logo-image">
                    <!-- COLOQUE SUA LOGO AQUI -->
                    <img src="logodjh.jpg" alt="Logo Taekwondo Hamdar">
                </div>
                <div class="logo-text">Taekwondo Hamdar</div>
            </div>
            <nav>
                <ul>
                    <li><a href="#" id="nav-home">Início</a></li>
                    <li><a href="#" id="nav-register">Cadastrar</a></li>
                    <li><a href="#" id="nav-list">Atletas</a></li>
                    <li><a href="#" id="nav-admin">Admin</a></li>
                    <li><a href="#" id="nav-login">Login</a></li>
                    <li><a href="#" id="nav-logout" class="hidden">Sair</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container">
        <!-- Página de Login -->
        <div id="login-page" class="card login-form card-gold">
            <h2 class="page-title">Login</h2>
            <div id="login-alert" class="alert hidden"></div>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">Email ou Usuário Admin</label>
                    <input type="text" id="login-email" required autocomplete="email">
                </div>
                <div class="form-group">
                    <label for="login-password">Senha</label>
                    <input type="password" id="login-password" required autocomplete="current-password">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Entrar</button>
            </form>
            <p style="margin-top: 1rem; text-align: center;">
                Não tem conta? <a href="#" id="show-register">Cadastre-se</a>
            </p>
        </div>

        <!-- Página de Cadastro -->
        <div id="register-page" class="card card-gold hidden">
            <h2 class="page-title">Cadastrar Atleta</h2>
            <div id="register-alert" class="alert hidden"></div>
            <form id="register-form">
                <div class="form-group">
                    <label for="register-email">Email</label>
                    <input type="email" id="register-email" required autocomplete="email">
                </div>
                <div class="form-group">
                    <label for="register-password">Senha</label>
                    <input type="password" id="register-password" required autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label for="register-birthdate">Data de Nascimento</label>
                    <input type="date" id="register-birthdate" required>
                </div>
                <div class="form-group">
                    <label for="register-tkd-belt">Faixa de Taekwondo</label>
                    <select id="register-tkd-belt" required>
                        <option value="">Selecione</option>
                        <option value="white">Branca</option>
                        <option value="yellow">Amarela</option>
                        <option value="orange">Laranja</option>
                        <option value="green">Verde</option>
                        <option value="blue-light">Azul Claro</option>
                        <option value="blue-dark">Azul Escuro</option>
                        <option value="purple">Roxa</option>
                        <option value="red">Vermelha</option>
                        <option value="red-black">Vermelha Ponta Preta</option>
                        <option value="black">Preta</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="register-hkd-belt">Faixa de Hapkido</label>
                    <select id="register-hkd-belt" required>
                        <option value="">Selecione</option>
                        <option value="white">Branca</option>
                        <option value="gray">Cinza</option>
                        <option value="yellow">Amarela</option>
                        <option value="orange">Laranja</option>
                        <option value="green">Verde</option>
                        <option value="blue">Azul</option>
                        <option value="brown">Marrom</option>
                        <option value="red">Vermelha</option>
                        <option value="red-black">Ponta Preta</option>
                        <option value="black">Preta</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="register-weight">Peso (kg)</label>
                    <input type="number" id="register-weight" step="0.1" required>
                </div>
                <button type="submit" class="btn btn-primary">Cadastrar</button>
            </form>
        </div>

        <!-- Página Inicial (Dashboard) -->
        <div id="home-page" class="hidden">
            <h2 class="page-title">Dashboard</h2>
            <div id="home-alert" class="alert hidden"></div>
            
            <div id="user-dashboard" class="hidden">
                <div class="pending-approval hidden" id="pending-approval-message">
                    <p>Seu cadastro está aguardando aprovação do administrador. Você terá acesso completo ao sistema após a aprovação.</p>
                </div>
                
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Meus Dados</h3>
                        <div id="user-data">
                            <!-- Dados do usuário serão carregados aqui -->
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <h3>Alterar Peso</h3>
                        <div class="form-group">
                            <label for="update-weight">Novo Peso (kg)</label>
                            <input type="number" id="update-weight" step="0.1">
                        </div>
                        <button class="btn btn-primary" id="update-weight-btn">Atualizar Peso</button>
                    </div>
                </div>
            </div>
            
            <div id="admin-dashboard" class="hidden">
                <div class="admin-actions">
                    <button class="btn btn-primary" id="add-athlete-btn">Adicionar Atleta Manualmente</button>
                    <button class="btn btn-danger" id="delete-all-btn">Excluir Todos os Atletas</button>
                </div>
                
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Cadastros Pendentes</h3>
                        <div id="pending-athletes">
                            <!-- Atletas pendentes serão carregados aqui -->
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <h3>Estatísticas</h3>
                        <div id="admin-stats">
                            <!-- Estatísticas serão carregadas aqui -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Página de Lista de Atletas -->
        <div id="list-page" class="hidden">
            <h2 class="page-title">Lista de Atletas</h2>
            <div id="list-alert" class="alert hidden"></div>
            
            <div class="card">
                <div class="table-container">
                    <table class="athlete-list">
                        <thead>
                            <tr>
                                <th>Email/Nome</th>
                                <th>Data Nasc.</th>
                                <th>Faixa TKD</th>
                                <th>Faixa HKD</th>
                                <th>Peso (kg)</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="athlete-table-body">
                            <!-- Os atletas serão inseridos aqui via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Página de Administração -->
        <div id="admin-page" class="card card-gold hidden">
            <h2 class="page-title">Acesso Administrativo</h2>
            <div id="admin-alert" class="alert hidden"></div>
            <form id="admin-login-form">
                <div class="form-group">
                    <label for="admin-username">Usuário Administrador</label>
                    <input type="text" id="admin-username" required autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="admin-password">Senha do Administrador</label>
                    <input type="password" id="admin-password" required autocomplete="current-password">
                </div>
                <button type="submit" class="btn btn-primary">Acessar como Admin</button>
            </form>
        </div>
    </div>

    <!-- Modal para adicionar atleta manualmente -->
    <div id="add-athlete-modal" class="modal-overlay">
        <div class="card" style="max-width: 500px; width: 100%; max-height: 90vh; overflow-y: auto;">
            <h3 class="page-title">Adicionar Atleta</h3>
            <form id="add-athlete-form">
                <div class="form-group">
                    <label for="add-athlete-name">Nome do Atleta</label>
                    <input type="text" id="add-athlete-name" required>
                </div>
                <div class="form-group">
                    <label for="add-athlete-birthdate">Data de Nascimento</label>
                    <input type="date" id="add-athlete-birthdate" required>
                </div>
                <div class="form-group">
                    <label for="add-athlete-tkd-belt">Faixa de Taekwondo</label>
                    <select id="add-athlete-tkd-belt" required>
                        <option value="">Selecione</option>
                        <option value="white">Branca</option>
                        <option value="yellow">Amarela</option>
                        <option value="orange">Laranja</option>
                        <option value="green">Verde</option>
                        <option value="blue-light">Azul Claro</option>
                        <option value="blue-dark">Azul Escuro</option>
                        <option value="purple">Roxa</option>
                        <option value="red">Vermelha</option>
                        <option value="red-black">Vermelha Ponta Preta</option>
                        <option value="black">Preta</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="add-athlete-hkd-belt">Faixa de Hapkido</label>
                    <select id="add-athlete-hkd-belt" required>
                        <option value="">Selecione</option>
                        <option value="white">Branca</option>
                        <option value="gray">Cinza</option>
                        <option value="yellow">Amarela</option>
                        <option value="orange">Laranja</option>
                        <option value="green">Verde</option>
                        <option value="blue">Azul</option>
                        <option value="brown">Marrom</option>
                        <option value="red">Vermelha</option>
                        <option value="red-black">Ponta Preta</option>
                        <option value="black">Preta</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="add-athlete-weight">Peso (kg)</label>
                    <input type="number" id="add-athlete-weight" step="0.1" required>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Adicionar Atleta</button>
                    <button type="button" class="btn btn-outline" id="cancel-add-athlete" style="margin-left: 10px;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Variáveis globais
        let athletes = JSON.parse(localStorage.getItem('athletes')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let isAdmin = localStorage.getItem('isAdmin') === 'true';
        const ADMIN_USERNAME = 'hamdar-admin';
        const ADMIN_PASSWORD = 'hamdar123';

        // Elementos da página
        const loginPage = document.getElementById('login-page');
        const registerPage = document.getElementById('register-page');
        const homePage = document.getElementById('home-page');
        const listPage = document.getElementById('list-page');
        const adminPage = document.getElementById('admin-page');
        const addAthleteModal = document.getElementById('add-athlete-modal');
        
        // Inicialização quando a página carrega
        document.addEventListener('DOMContentLoaded', function() {
            // Navegação
            document.getElementById('nav-home').addEventListener('click', function(e) {
                e.preventDefault();
                showPage('home');
            });
            document.getElementById('nav-register').addEventListener('click', function(e) {
                e.preventDefault();
                showPage('register');
            });
            document.getElementById('nav-list').addEventListener('click', function(e) {
                e.preventDefault();
                showPage('list');
            });
            document.getElementById('nav-admin').addEventListener('click', function(e) {
                e.preventDefault();
                showPage('admin');
            });
            document.getElementById('nav-login').addEventListener('click', function(e) {
                e.preventDefault();
                showPage('login');
            });
            document.getElementById('nav-logout').addEventListener('click', function(e) {
                e.preventDefault();
                logout();
            });
            document.getElementById('show-register').addEventListener('click', function(e) {
                e.preventDefault();
                showPage('register');
            });

            // Formulários
            document.getElementById('login-form').addEventListener('submit', handleLogin);
            document.getElementById('register-form').addEventListener('submit', handleRegister);
            document.getElementById('admin-login-form').addEventListener('submit', handleAdminLogin);
            document.getElementById('update-weight-btn').addEventListener('click', updateUserWeight);
            document.getElementById('delete-all-btn').addEventListener('click', deleteAllAthletes);
            document.getElementById('add-athlete-btn').addEventListener('click', function() {
                addAthleteModal.classList.add('active');
            });
            document.getElementById('cancel-add-athlete').addEventListener('click', function() {
                addAthleteModal.classList.remove('active');
            });
            document.getElementById('add-athlete-form').addEventListener('submit', handleAddAthlete);

            // Fechar modal ao clicar fora
            addAthleteModal.addEventListener('click', function(e) {
                if (e.target === addAthleteModal) {
                    addAthleteModal.classList.remove('active');
                }
            });

            updateNavigation();
            showPage('login');
        });

        // Funções
        function showPage(page) {
            console.log('Mostrando página:', page);
            
            // Esconder todas as páginas
            loginPage.classList.add('hidden');
            registerPage.classList.add('hidden');
            homePage.classList.add('hidden');
            listPage.classList.add('hidden');
            adminPage.classList.add('hidden');
            
            // Mostrar a página solicitada
            switch(page) {
                case 'login':
                    loginPage.classList.remove('hidden');
                    break;
                case 'register':
                    registerPage.classList.remove('hidden');
                    break;
                case 'home':
                    homePage.classList.remove('hidden');
                    renderDashboard();
                    break;
                case 'list':
                    if (currentUser || isAdmin) {
                        listPage.classList.remove('hidden');
                        renderAthleteList();
                    } else {
                        showAlert('login-alert', 'Você precisa fazer login para ver a lista de atletas.', 'error');
                        showPage('login');
                    }
                    break;
                case 'admin':
                    adminPage.classList.remove('hidden');
                    break;
            }
        }

        function updateNavigation() {
            const navLogin = document.getElementById('nav-login');
            const navLogout = document.getElementById('nav-logout');
            
            if (currentUser || isAdmin) {
                navLogin.classList.add('hidden');
                navLogout.classList.remove('hidden');
            } else {
                navLogin.classList.remove('hidden');
                navLogout.classList.add('hidden');
            }
        }

        function handleLogin(e) {
            e.preventDefault();
            console.log('Tentando login...');
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            console.log('Credenciais:', { email, password });
            
            // Verificar se é admin
            if (email === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                console.log('Login como admin bem-sucedido');
                isAdmin = true;
                localStorage.setItem('isAdmin', 'true');
                showAlert('login-alert', 'Login administrativo realizado com sucesso!', 'success');
                updateNavigation();
                showPage('home');
                return;
            }
            
            // Verificar se é um atleta
            const athlete = athletes.find(a => a.email === email && a.password === password);
            if (athlete) {
                console.log('Login como atleta bem-sucedido');
                currentUser = athlete;
                localStorage.setItem('currentUser', JSON.stringify(athlete));
                showAlert('login-alert', 'Login realizado com sucesso!', 'success');
                updateNavigation();
                showPage('home');
            } else {
                console.log('Login falhou');
                showAlert('login-alert', 'Email ou senha incorretos.', 'error');
            }
        }

        function handleRegister(e) {
            e.preventDefault();
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const birthdate = document.getElementById('register-birthdate').value;
            const tkdBelt = document.getElementById('register-tkd-belt').value;
            const hkdBelt = document.getElementById('register-hkd-belt').value;
            const weight = parseFloat(document.getElementById('register-weight').value);
            
            // Verificar se o email já existe
            if (athletes.some(a => a.email === email)) {
                showAlert('register-alert', 'Este email já está cadastrado.', 'error');
                return;
            }
            
            // Criar novo atleta (status pendente por padrão)
            const newAthlete = {
                id: Date.now().toString(),
                email,
                password,
                birthdate,
                tkdBelt,
                hkdBelt,
                weight,
                status: 'pending',
                registeredAt: new Date().toISOString()
            };
            
            athletes.push(newAthlete);
            localStorage.setItem('athletes', JSON.stringify(athletes));
            
            showAlert('register-alert', 'Cadastro realizado com sucesso! Aguarde a aprovação do administrador.', 'success');
            document.getElementById('register-form').reset();
            
            // Fazer login automaticamente
            currentUser = newAthlete;
            localStorage.setItem('currentUser', JSON.stringify(newAthlete));
            updateNavigation();
            showPage('home');
        }

        function handleAdminLogin(e) {
            e.preventDefault();
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            
            if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                isAdmin = true;
                localStorage.setItem('isAdmin', 'true');
                showAlert('admin-alert', 'Acesso administrativo concedido!', 'success');
                updateNavigation();
                showPage('home');
            } else {
                showAlert('admin-alert', 'Credenciais administrativas incorretas.', 'error');
            }
        }

        function handleAddAthlete(e) {
            e.preventDefault();
            const name = document.getElementById('add-athlete-name').value;
            const birthdate = document.getElementById('add-athlete-birthdate').value;
            const tkdBelt = document.getElementById('add-athlete-tkd-belt').value;
            const hkdBelt = document.getElementById('add-athlete-hkd-belt').value;
            const weight = parseFloat(document.getElementById('add-athlete-weight').value);
            
            // Criar novo atleta (aprovado automaticamente)
            const newAthlete = {
                id: Date.now().toString(),
                name,
                birthdate,
                tkdBelt,
                hkdBelt,
                weight,
                status: 'approved',
                registeredAt: new Date().toISOString(),
                isManual: true
            };
            
            athletes.push(newAthlete);
            localStorage.setItem('athletes', JSON.stringify(athletes));
            
            showAlert('home-alert', 'Atleta adicionado com sucesso!', 'success');
            document.getElementById('add-athlete-form').reset();
            addAthleteModal.classList.remove('active');
            
            renderDashboard();
            renderAthleteList();
        }

        function renderDashboard() {
            const userDashboard = document.getElementById('user-dashboard');
            const adminDashboard = document.getElementById('admin-dashboard');
            const pendingApprovalMessage = document.getElementById('pending-approval-message');
            
            if (isAdmin) {
                userDashboard.classList.add('hidden');
                adminDashboard.classList.remove('hidden');
                renderAdminDashboard();
            } else if (currentUser) {
                userDashboard.classList.remove('hidden');
                adminDashboard.classList.add('hidden');
                renderUserDashboard();
                
                if (currentUser.status === 'pending') {
                    pendingApprovalMessage.classList.remove('hidden');
                } else {
                    pendingApprovalMessage.classList.add('hidden');
                }
            }
        }

        function renderUserDashboard() {
            const userData = document.getElementById('user-data');
            
            const birthdate = new Date(currentUser.birthdate);
            const formattedDate = `${birthdate.getDate().toString().padStart(2, '0')}/${(birthdate.getMonth() + 1).toString().padStart(2, '0')}/${birthdate.getFullYear()}`;
            
            userData.innerHTML = `
                <p><strong>Email:</strong> ${currentUser.email || currentUser.name}</p>
                <p><strong>Data de Nascimento:</strong> ${formattedDate}</p>
                <p><strong>Faixa de Taekwondo:</strong> <span class="belt belt-${currentUser.tkdBelt}">${getBeltName(currentUser.tkdBelt)}</span></p>
                <p><strong>Faixa de Hapkido:</strong> <span class="belt belt-hapkido-${currentUser.hkdBelt}">${getBeltName(currentUser.hkdBelt)}</span></p>
                <p><strong>Peso:</strong> ${currentUser.weight} kg</p>
                <p><strong>Status:</strong> <span class="status-badge status-${currentUser.status}">${currentUser.status === 'pending' ? 'Pendente' : 'Aprovado'}</span></p>
            `;
            
            document.getElementById('update-weight').value = currentUser.weight;
        }

        function renderAdminDashboard() {
            const pendingAthletes = document.getElementById('pending-athletes');
            const adminStats = document.getElementById('admin-stats');
            
            const pending = athletes.filter(a => a.status === 'pending');
            if (pending.length > 0) {
                let pendingHTML = '<ul>';
                pending.forEach(athlete => {
                    pendingHTML += `
                        <li style="margin-bottom: 0.5rem; padding: 0.5rem; background: #f5f5f5; border-radius: 4px;">
                            <div><strong>${athlete.email}</strong></div>
                            <div style="font-size: 0.9rem; color: #666;">Faixa TKD: ${getBeltName(athlete.tkdBelt)}</div>
                            <div style="margin-top: 0.5rem;">
                                <button class="btn btn-success btn-small" onclick="approveAthlete('${athlete.id}')">Aprovar</button>
                                <button class="btn btn-danger btn-small" onclick="deleteAthlete('${athlete.id}')">Recusar</button>
                            </div>
                        </li>
                    `;
                });
                pendingHTML += '</ul>';
                pendingAthletes.innerHTML = pendingHTML;
            } else {
                pendingAthletes.innerHTML = '<p>Nenhum cadastro pendente.</p>';
            }
            
            const totalAthletes = athletes.length;
            const approvedAthletes = athletes.filter(a => a.status === 'approved').length;
            const pendingAthletesCount = pending.length;
            const manualAthletes = athletes.filter(a => a.isManual).length;
            
            adminStats.innerHTML = `
                <p><strong>Total de Atletas:</strong> ${totalAthletes}</p>
                <p><strong>Atletas Aprovados:</strong> ${approvedAthletes}</p>
                <p><strong>Cadastros Pendentes:</strong> ${pendingAthletesCount}</p>
                <p><strong>Atletas Manuais:</strong> ${manualAthletes}</p>
            `;
        }

        function renderAthleteList() {
            const tableBody = document.getElementById('athlete-table-body');
            tableBody.innerHTML = '';
            
            const beltOrder = {
                'black': 10, 'red-black': 9, 'red': 8, 'purple': 7,
                'blue-dark': 6, 'blue-light': 5, 'green': 4, 'orange': 3,
                'yellow': 2, 'white': 1
            };
            
            let athletesToShow = [...athletes];
            if (!isAdmin) {
                athletesToShow = athletesToShow.filter(a => a.status === 'approved');
            }
            
            const sortedAthletes = athletesToShow.sort((a, b) => {
                return beltOrder[b.tkdBelt] - beltOrder[a.tkdBelt];
            });
            
            sortedAthletes.forEach(athlete => {
                const row = document.createElement('tr');
                
                const birthdate = new Date(athlete.birthdate);
                const formattedDate = `${birthdate.getDate().toString().padStart(2, '0')}/${(birthdate.getMonth() + 1).toString().padStart(2, '0')}/${birthdate.getFullYear()}`;
                
                const displayName = athlete.name || athlete.email;
                
                row.innerHTML = `
                    <td>${displayName}</td>
                    <td>${formattedDate}</td>
                    <td><span class="belt belt-${athlete.tkdBelt}">${getBeltName(athlete.tkdBelt)}</span></td>
                    <td><span class="belt belt-hapkido-${athlete.hkdBelt}">${getBeltName(athlete.hkdBelt)}</span></td>
                    <td>${athlete.weight}</td>
                    <td><span class="status-badge status-${athlete.status}">${athlete.status === 'pending' ? 'Pendente' : 'Aprovado'}</span></td>
                    <td class="actions">
                        ${(isAdmin || currentUser?.id === athlete.id) ? `<button class="btn btn-primary btn-small" onclick="editWeight('${athlete.id}')">Alterar Peso</button>` : ''}
                        ${isAdmin ? `<button class="btn btn-danger btn-small" onclick="deleteAthlete('${athlete.id}')">Excluir</button>` : ''}
                        ${isAdmin && athlete.status === 'pending' ? `<button class="btn btn-success btn-small" onclick="approveAthlete('${athlete.id}')">Aprovar</button>` : ''}
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function getBeltName(beltKey) {
            const beltNames = {
                'white': 'Branca', 'gray': 'Cinza', 'yellow': 'Amarela', 'orange': 'Laranja',
                'green': 'Verde', 'blue-light': 'Azul Claro', 'blue-dark': 'Azul Escuro',
                'blue': 'Azul', 'brown': 'Marrom', 'purple': 'Roxa', 'red': 'Vermelha',
                'red-black': 'Ponta Preta', 'black': 'Preta'
            };
            
            return beltNames[beltKey] || beltKey;
        }

        function updateUserWeight() {
            const newWeight = parseFloat(document.getElementById('update-weight').value);
            if (isNaN(newWeight)) {
                showAlert('home-alert', 'Por favor, insira um peso válido.', 'error');
                return;
            }
            
            const athleteIndex = athletes.findIndex(a => a.id === currentUser.id);
            if (athleteIndex !== -1) {
                athletes[athleteIndex].weight = newWeight;
                localStorage.setItem('athletes', JSON.stringify(athletes));
            }
            
            currentUser.weight = newWeight;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            showAlert('home-alert', 'Peso atualizado com sucesso!', 'success');
            renderUserDashboard();
        }

        function editWeight(athleteId) {
            const athlete = athletes.find(a => a.id === athleteId);
            if (!athlete) return;
            
            const newWeight = prompt(`Alterar peso para ${athlete.name || athlete.email}:`, athlete.weight);
            if (newWeight !== null && !isNaN(parseFloat(newWeight))) {
                athlete.weight = parseFloat(newWeight);
                localStorage.setItem('athletes', JSON.stringify(athletes));
                
                if (currentUser && currentUser.id === athleteId) {
                    currentUser.weight = parseFloat(newWeight);
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                }
                
                renderAthleteList();
                if (homePage.classList.contains('hidden')) {
                    showAlert('list-alert', 'Peso atualizado com sucesso!', 'success');
                } else {
                    renderDashboard();
                }
            }
        }

        function approveAthlete(athleteId) {
            const athlete = athletes.find(a => a.id === athleteId);
            if (!athlete) return;
            
            athlete.status = 'approved';
            localStorage.setItem('athletes', JSON.stringify(athletes));
            
            if (currentUser && currentUser.id === athleteId) {
                currentUser.status = 'approved';
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }
            
            renderAthleteList();
            renderDashboard();
            showAlert('home-alert', 'Atleta aprovado com sucesso!', 'success');
        }

        function deleteAthlete(athleteId) {
            if (confirm('Tem certeza que deseja excluir este atleta?')) {
                athletes = athletes.filter(a => a.id !== athleteId);
                localStorage.setItem('athletes', JSON.stringify(athletes));
                
                if (currentUser && currentUser.id === athleteId) {
                    logout();
                } else {
                    renderAthleteList();
                    renderDashboard();
                    showAlert('list-alert', 'Atleta excluído com sucesso!', 'success');
                }
            }
        }

        function deleteAllAthletes() {
            if (confirm('Tem certeza que deseja excluir TODOS os atletas? Esta ação não pode ser desfeita.')) {
                athletes = [];
                localStorage.setItem('athletes', JSON.stringify(athletes));
                renderAthleteList();
                renderDashboard();
                showAlert('home-alert', 'Todos os atletas foram excluídos.', 'success');
            }
        }

        function logout() {
            currentUser = null;
            isAdmin = false;
            localStorage.removeItem('currentUser');
            localStorage.removeItem('isAdmin');
            updateNavigation();
            showPage('login');
        }

        function showAlert(containerId, message, type) {
            const alertContainer = document.getElementById(containerId);
            alertContainer.textContent = message;
            alertContainer.classList.remove('hidden', 'alert-success', 'alert-error', 'alert-warning');
            
            if (type === 'success') {
                alertContainer.classList.add('alert-success');
            } else if (type === 'warning') {
                alertContainer.classList.add('alert-warning');
            } else {
                alertContainer.classList.add('alert-error');
            }
            
            setTimeout(() => {
                alertContainer.classList.add('hidden');
            }, 5000);
        }

        // Tornar funções globais para os botões
        window.approveAthlete = approveAthlete;
        window.deleteAthlete = deleteAthlete;
        window.editWeight = editWeight;
    </script>
</body>
</html>